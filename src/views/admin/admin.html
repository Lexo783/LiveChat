<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
</head>
<body>
    <h1>{{ h1 }} </h1>
    <div class="create-user-div">
        <h2>{{ formCreate }}</h2>
        <form id="form_create_user">
            <input name="email" type="text" placeholder="email" id="email" required>
            <input name="pseudo" type="text" placeholder="pseudo" id="pseudo" required>
            <input name="password" type="password" placeholder="Mot de passe" id="password" required>
            <button type="submit">Générer</button>
        </form>
    </div>

        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        window.addEventListener("load", () => {
            const formRoom = document.querySelector("#form_create_room");
            formRoom.addEventListener("submit", async event => {
                event.preventDefault();
                const name = document.querySelector('#name_room').value;
                const defaut = (document.querySelector('#defaut_check:checked') !== null ? true : false);

                data = {name: name, defaut: defaut}
                console.log(data)
                axios({
                    method: "post",
                    url: "/room",
                    data: data
                })
                    .then((res) => {
                        console.log(res);
                    })
                    .catch((err) => {
                        throw err;
                    });
            });
        });
    </script>
        <script>
            window.addEventListener("load", () => {
                const form = document.querySelector("#form_create_user");
                form.addEventListener("submit", async event => {
                    event.preventDefault();
                    const email = document.querySelector('#email').value;
                    const pseudo = document.querySelector('#pseudo').value;
                    const password = document.querySelector('#password').value;
                    data = {email: email, pseudo: pseudo, password: password}
                    console.log(data)
                    axios({
                        method: "post",
                        url: "/user",
                        data: data
                    })
                    .then((res) => {
                        console.log(res);
                    })
                    .catch((err) => {
                        throw err;
                    });
                });
            });
        </script>
        <script>
            window.addEventListener("load", () => {
                const form = document.querySelector("#form_delete_user");
                if(form != null){
                    form.addEventListener("submit", async event => {
                    event.preventDefault();
                    const data = {
                        id: document.querySelector('#input_id_user').value
                    }
                    console.log('query selector :',data)

                    axios({
                        method: "delete",
                        url: "/user",
                        data: data
                    })
                    .then((res) => {
                        console.log(res);
                    })
                    .catch((err) => {
                        throw err;
                    });
                });
                }        
            });
        </script>
    
</body>
</html>